<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wolf Disc Golf Scoring</title>

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./assets/styles.2.18.2.css" />

  <link rel="apple-touch-icon" sizes="180x180" href="./assets/icons/apple-touch-icon.png" />
  
  <meta name="theme-color" content="#0f172a" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand__title">
        Wolf <span id="appVersion" class="brand__subtitle"></span>
      </div>
      <div class="brand__subtitle">Disc Golf Scoring</div>
    </div>
    <div class="topbar__actions">

    <!-- Theme (always visible) -->
    <div class="themePicker">
      <select id="themeSelect"
              class="btn btn--ghost themeSelect"
              aria-label="Theme">
        <option value="graphite">Graphite</option>
        <option value="coffee">Coffee</option>
        <option value="forest">Forest</option>
        <option value="midnight">Midnight</option>
        <option value="crimson">Crimson</option>
        <option value="teal">Teal</option>
        <option value="summer">Summertime</option>
        <option value="rainbow">Rainbow</option>
        <option value="retro">Retro Arcade</option>
        <option value="cottoncandy">Cotton Candy</option>
      </select>
    </div>

    <!-- Hamburger menu -->
    <div class="topbarMenu">
      <button id="btnMenu"
              class="btn btn--ghost topbarMenu__btn"
              type="button"
              aria-label="Menu"
              aria-haspopup="true"
              aria-expanded="false">
        <svg class="topbarMenu__icon"
            viewBox="0 0 24 24"
            width="20"
            height="20"
            aria-hidden="true">
          <path d="M2 7h20M2 12h20M2 17h20"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"/>
        </svg>
      </button>

      <div id="topbarMenuPanel"
          class="menuPanel hidden"
          role="menu"
          aria-label="Top bar menu">

        <div class="menuPanel__section">
          <button id="btnSetup"
                  class="btn btn--ghost menuPanel__item"
                  type="button"
                  role="menuitem">
            Edit Settings
          </button>

          <button id="btnRules"
                  class="btn btn--ghost menuPanel__item"
                  type="button"
                  role="menuitem">
            Rules
          </button>

          <button id="btnReset"
                  class="btn btn--danger menuPanel__item"
                  type="button"
                  role="menuitem"
                  title="Clear saved game">
            Reset
          </button>
        </div>

      </div>
    </div>

  </div>

  </header>

  <main class="container">
    <div id="updateBanner" class="updateBanner hidden" role="status" aria-live="polite">
      <div>Update available</div>
      <button id="btnUpdateNow" class="btn btn--primary" type="button">Update</button>
    </div>

    <!-- LOAD -->
    <section id="screenLoad" class="screen">
      <div class="card">
        <h1>Welcome!</h1>
        <p class="muted">Once loaded, the app and your game is saved locally and will work without a network connection. Resume is available even if you close the app and reopen it later. If Resume is greyed out, you have no saved game data.</p>
        <p class="muted">Pro tip: Save to your home screen as an app for easy access!</p>

        <div class="stack startActions">
          <button id="btnNewGame" class="btn btn--primary" type="button">Start New Game</button>
          <button id="btnResume" class="btn" type="button" disabled>Resume Game</button>
          <!--<button id="btnCheckUpdate" class="btn btn--ghost" type="button">Check for Update</button>-->
        </div>
        <div class="card--inset">
          <div class="donate-block">
            <p class="donate-text">
              This app is free to use — but if you'd like to support the cause and help me build more cool stuff,
              consider donating!
            </p>

            <a 
              href="https://www.venmo.com/u/chumworx" 
              target="_blank" 
              rel="noopener noreferrer"
              class="donate-button"
            >
              Donate via Venmo
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- SETUP -->
    <section id="screenSetup" class="screen hidden">
      <div class="card">
        <h1>Game Setup</h1>

        <div class="formGrid">
          <div class="field">
            <label>Select the number of players</label>
            <div id="playerCountBtns" class="segmented" role="group" aria-label="Number of players">
              <button type="button" class="segBtn" data-value="4">4</button>
              <button type="button" class="segBtn" data-value="5">5</button>
            </div>
          </div>

          <div class="field">
            <label>Select the number of holes (multiple of player count)</label>
            <div id="holeCountBtns" class="segmented" role="group" aria-label="Number of holes"></div>
            <div style="text-align:center" class="hint"></div>
          </div>
        </div>

        <div class="card card--inset">
          <div class="row row--between row--center setupPlayersHeader">
            <h2>Players</h2>
            <button id="btnRandomize" class="btn btn--ghost" type="button">Randomize Order</button>
          </div>

          <div id="playerInputs" class="stack"></div>
          <div class="hint">Order matters. Wolf is the last player each hole; order rotates every hole.</div>
        </div>

        <div class="card card--inset">
          <h2>Options</h2>
          <div class="stack">
            <label class="check">
              <input id="optPushTies" type="checkbox" />
              <span>Push points on tied holes</span>
            </label>

            <label class="check">
              <input id="optBlindWolf" type="checkbox" />
              <span>Allow “Blind Wolf” (double points)</span>
            </label>
          </div>
        </div>

        <div class="row row--between setupFooter">
          <button id="btnBackToLoad" class="btn" type="button">Back</button>
          <button id="btnStartGame" class="btn btn--primary" type="button">Start Game</button>
        </div>
      </div>
    </section>

    <!-- GAME -->
    <section id="screenGame" class="screen hidden">
      <div class="card">
        <div class="stickyHoleBar">
          <div class="row row--between row--center">
            <button id="btnPrevHole" class="btn btn--ghost" type="button">←</button>
            <div class="center">
              <div id="holeTitle" class="h1like">Hole 1</div>
              <div id="holeMeta" class="muted small"></div>
            </div>
            <button id="btnNextHole" class="btn btn--ghost" type="button">→</button>
          </div>
        </div>

        <div class="card card--inset">
          <h2>Tee Order</h2>
          <ol id="orderList" class="orderList"></ol>
        </div>

        <div id="blindWolfBlock" class="card card--inset hidden">
          <h2>Blind Wolf</h2>
          <label class="check">
            <input id="blindWolfToggle" type="checkbox" />
            <span>Blind Wolf declared (2x pts)</span>
          </label>
          <div class="hint">If enabled, wager doubles for this hole.</div>
        </div>

        <div class="card card--inset">
          <h2>Select Wolf Partner</h2>
          <div id="partnerButtons" class="pillGrid"></div>
          <div class="row row--between row--center">
            <label class="check">
              <input id="loneWolfToggle" type="checkbox" />
              <span> Lone Wolf</span>
            </label>
            <div class="hint">Lone Wolf is 1 vs everyone.</div>
          </div>
        </div>

        <div class="card card--inset">
          <h2>Result</h2>
          <div id="resultButtons" class="pillGrid"></div>
        </div>

        <div class="gameFooterBar gameFooter">
          <button id="btnViewScores" class="btn" type="button">Scores</button>

          <div class="footerMid">
            <div id="holeTitleBottom" class="holeFooterTitle">Hole</div>
            <div id="holeMetaBottom" class="muted small"></div>
          </div>

          <button id="btnSaveHole" class="btn btn--primary" type="button">Save Hole</button>
        </div>
      </div>
    </section>

    <!-- SCOREBOARD -->
    <section id="screenScoreboard" class="screen hidden">
      <div class="card">
        <div class="row row--between row--center">
          <h1>Scoreboard</h1>
          <button id="btnBackToGame" class="btn" type="button">Back</button>
        </div>

        <div id="scoreTableWrap" class="card card--inset"></div>

        <div class="card card--inset">
          <h2>Holes</h2>
          <div id="holesList" class="holesList"></div>
        </div>

        <div class="gameFooterBar gameFooter">
          <button id="btnFinishGame" class="btn btn--primary" type="button">Finish Game</button>
          <div class="footerMid">
            <div id="finishStatus" class="muted small"></div>
          </div>
          <button id="btnNewFromScoreboard" class="btn btn--danger" type="button">New Game</button>
        </div>

      </div>
    </section>

    <!-- RULES MODAL -->
    <dialog id="rulesDialog" class="modal">
      <div class="modal__inner">
        <div class="row row--between row--center">
          <h2 class="rules">Rules of Play</h2>
          <button id="btnCloseRules" class="btn btn--ghost" type="button">Close</button>
        </div>

        <div class="rules">
          <ul>
            <li><b>Players:</b> 4 or 5</li>
            <li><b>Wager:</b> For easy math, it is recommended to wager $1.50 (or multiples of) per pt on 5 player games. Trust me on this one. $1 per point works just fine with four players.</li>
            <li><b>Order:</b> Fixed order rotates each hole. The last player in the order is the <b>Wolf</b></li>
            <li><b>Wolf Partner:</b> After each player tees, Wolf must take them as partner or pass. Once another player tees, the previous player cannot be selected. If the Wolf has not chosen a partner before their turn to throw, they must take the last player to tee before them or declare "Lone Wolf" before they throw.</li>
            <li><b>Wolf Pack:</b> The Wolf and their partner are a team. The Wolf is the leader of the pack.</li>
            <li><b>Little Piggies:</b> All the players who are not the Wolf or their partner are "Little Piggies".</li>
            <li><b>Win:</b> The team with the least throws to finish the hole wins.</li>
            <li><b>Ties:</b> No points awarded. Optional "push" carries 1 pts per player to the next hole.</li>
            <li><b>Points:</b> All players wager 1 point per hole. The winning team splits the pot between players evenly.</li>
            <li><b>Lone Wolf:</b> Wins or Loses 1 point per opponent. Big Risk for Big Reward. Tie is the same as any other tie.</li>
          </ul>
        </div>
      </div>
    </dialog>

  </main>

  <div id="menuOverlay" class="menuOverlay hidden"></div>

  <script defer src="./assets/app.2.18.2.js"></script>
</body>
</html>
